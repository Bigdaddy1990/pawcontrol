name: Release Please

# Nur bei main-branch pushes, nicht bei PRs
on:
  push:
    branches: [main]
    paths:
      - 'custom_components/**'
      - 'CHANGELOG.md'
      - 'pyproject.toml'

#on:
#  push:
#    branches:
#      - main
  # Verhindere parallele Läufe
#  workflow_dispatch:

concurrency:
  group: release-please
  cancel-in-progress: false

jobs:
  release-please:
    runs-on: ubuntu-latest
    steps:
      - uses: googleapis/release-please-action@v4
        with:
          # Rate Limiting reduzieren
          token: ${{ secrets.GITHUB_TOKEN }}
          release-type: simple
          # Nur bei echten Änderungen laufen
          skip-github-release: false
